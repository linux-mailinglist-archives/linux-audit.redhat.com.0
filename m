Return-Path: <linux-audit-bounces@redhat.com>
X-Original-To: lists+linux-audit@lfdr.de
Delivered-To: lists+linux-audit@lfdr.de
Received: from us-smtp-delivery-1.mimecast.com (us-smtp-delivery-1.mimecast.com [205.139.110.120])
	by mail.lfdr.de (Postfix) with ESMTP id 8D09A1AE127
	for <lists+linux-audit@lfdr.de>; Fri, 17 Apr 2020 17:30:32 +0200 (CEST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
	s=mimecast20190719; t=1587137431;
	h=from:from:sender:sender:reply-to:subject:subject:date:date:
	 message-id:message-id:to:to:cc:cc:mime-version:mime-version:
	 content-type:content-type:
	 content-transfer-encoding:content-transfer-encoding:
	 in-reply-to:in-reply-to:references:references:list-id:list-help:
	 list-unsubscribe:list-subscribe:list-post;
	bh=pfUJbufl+IXa0wN9f1URU5Ya86lMe3Swo/1YKXnsa4g=;
	b=bVMPx8dSD9/vD7B0viWqXdO6nBLZ5uXbhgMoAOmq8jvB0Cf3rdqSVT7uabuRxXy15LKlhG
	OWBjhZarA/SXi3Gi/1hHS5Am5cjRtVY/lRluCFRYgra7i1Rw/63WxbNLIhGvBWVMHGn0H+
	Fy3iyve6Z38Xh5Gw6kH1y/gD+dnmqA0=
Received: from mimecast-mx01.redhat.com (mimecast-mx01.redhat.com
 [209.132.183.4]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-114-uuZDD_0oOaK2fcJQsVg3OA-1; Fri, 17 Apr 2020 11:30:28 -0400
X-MC-Unique: uuZDD_0oOaK2fcJQsVg3OA-1
Received: from smtp.corp.redhat.com (int-mx07.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mimecast-mx01.redhat.com (Postfix) with ESMTPS id E0266800D53;
	Fri, 17 Apr 2020 15:30:20 +0000 (UTC)
Received: from colo-mx.corp.redhat.com (colo-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.20])
	by smtp.corp.redhat.com (Postfix) with ESMTPS id C10351001DC0;
	Fri, 17 Apr 2020 15:30:17 +0000 (UTC)
Received: from lists01.pubmisc.prod.ext.phx2.redhat.com (lists01.pubmisc.prod.ext.phx2.redhat.com [10.5.19.33])
	by colo-mx.corp.redhat.com (Postfix) with ESMTP id C11A518095FF;
	Fri, 17 Apr 2020 15:30:12 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx02.intmail.prod.int.phx2.redhat.com
	[10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id 03HFU1kR005665 for <linux-audit@listman.util.phx.redhat.com>;
	Fri, 17 Apr 2020 11:30:01 -0400
Received: by smtp.corp.redhat.com (Postfix)
	id CDDAD60BE0; Fri, 17 Apr 2020 15:30:01 +0000 (UTC)
Delivered-To: linux-audit@redhat.com
Received: from madcap2.tricolour.ca (unknown [10.3.128.9])
	by smtp.corp.redhat.com (Postfix) with ESMTPS id A592C60BF7;
	Fri, 17 Apr 2020 15:29:55 +0000 (UTC)
Date: Fri, 17 Apr 2020 11:29:52 -0400
From: Richard Guy Briggs <rgb@redhat.com>
To: Paul Moore <paul@paul-moore.com>
Subject: Re: [oss-security] CVE-2020-10708 kernel: race condition in
	kernel/audit.c may allow low privilege users trigger kernel panic
Message-ID: <20200417152952.4yj6axr4z5qxjkuj@madcap2.tricolour.ca>
References: <6039238.vel3c4OXdL@x2>
	<CAHC9VhR=gs5p8Bn6gJspSvtgcHsR1zOxG_gdGjsWVEzY0XRzcg@mail.gmail.com>
MIME-Version: 1.0
In-Reply-To: <CAHC9VhR=gs5p8Bn6gJspSvtgcHsR1zOxG_gdGjsWVEzY0XRzcg@mail.gmail.com>
User-Agent: NeoMutt/20180716
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.12
X-loop: linux-audit@redhat.com
Cc: linux-audit@redhat.com
X-BeenThere: linux-audit@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
List-Id: Linux Audit Discussion <linux-audit.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-audit>,
	<mailto:linux-audit-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-audit>
List-Post: <mailto:linux-audit@redhat.com>
List-Help: <mailto:linux-audit-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-audit>,
	<mailto:linux-audit-request@redhat.com?subject=subscribe>
Sender: linux-audit-bounces@redhat.com
Errors-To: linux-audit-bounces@redhat.com
X-Scanned-By: MIMEDefang 2.84 on 10.5.11.22
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Content-Disposition: inline

T24gMjAyMC0wNC0xNyAxMDowMywgUGF1bCBNb29yZSB3cm90ZToKPiBPbiBGcmksIEFwciAxNywg
MjAyMCBhdCA5OjM5IEFNIFN0ZXZlIEdydWJiIDxzZ3J1YmJAcmVkaGF0LmNvbT4gd3JvdGU6Cj4g
PiBIZWxsbywKPiA+Cj4gPiBTaW5jZSB0aGlzIGlzIHB1YmxpYy4uLm5vIGhhcm0gZHJvcHBpbmcg
YSBjb3B5IG92ZXIgaGVyZS4gTXkgdGhvdWdodHMgYXJlCj4gPiB0aGF0IHRoZXJlIGlzIGEgcmFj
ZSBoZXJlLiBCdXQgc2luY2Ugc3RhcnRpbmcvc3RvcHBpbmcgdGhlIGF1ZGl0IGRhZW1vbgo+ID4g
cmVxdWlyZXMgcm9vdCBwcml2cyBhbmQgYXMgcm9vdCB5b3UgY2FuIGRvIHdvcnNlIHRoaW5ncy4g
SSBkb24ndCBrbm93IGlmIHRoaXMKPiA+IGlzIGZpeGFibGUgb3Igd29ya2luZyBwZXIgZGVzaWdu
Lgo+IAo+IFRoZSBmaXJzdCB0aGluZyB0byBub3RlIGlzIHRoYXQgdGhlIGNvZGUgc25pcHBldHMg
YmVsb3cgYXJlIG5vdCBmcm9tIGEKPiBtb2Rlcm4gdXBzdHJlYW0ga2VybmVsOyBJJ20gZ3Vlc3Np
bmcgaXQncyBhIFJIRUwtNy54IGJhc2VkIGtlcm5lbAo+IGdpdmVuIHRoZSBwcm9ibGVtIHJlcG9y
dC4KClRoYXQgd291bGQgYmUgY29ycmVjdC4KCj4gIFRoZSByZWxldmFudCBjb2RlIGNoYW5nZWQg
c3Vic3RhbnRpYWxseQo+IHdoZW4gSSByZXdvcmtlZCBob3cgdGhlIGF1ZGl0IHF1ZXVlIHdhcyBt
YW5hZ2VkOyBpdCdzIGJlZW4gYSB3aGlsZSBub3cKPiBzbyBJIGNhbid0IHNheSB3aXRoIDEwMCUg
Y29uZmlkZW5jZSB0aGF0IHRoaXMgaGFzIGJlZW4gc29ydGVkIG91dCwgYnV0Cj4gSSBiZWxpZXZl
IHRoZSBjdXJyZW50IHVwc3RyZWFtIGNvZGUgc2hvdWxkIGhhbmRsZSBhdWRpdGQgcmVzdGFydHMK
PiB3aXRoaW4gdGhlIGJvdW5kcyBvZiB0aGUgcmVjb3JkIHF1ZXVlLgoKVGhlIHVwc3RyZWFtIGNv
ZGUgaGFzIGFscmVhZHkgYmVlbiB0ZXN0ZWQgYW5kIGhhcyB3aXRoc3Rvb2QgdGhpcyBzb3J0IG9m
CmFidXNlIGZvciBhIHN1c3RhaW5lZCBwZXJpb2Qgb2YgdGVzdGluZyB0aW1lLiAgSXQgaXMgYmVs
aWV2ZWQgdGhhdApjb21taXQgNWI1MjMzMGJiZmU2ICgiYXVkaXQ6IGZpeCBhdWRpdGQva2VybmVs
IGNvbm5lY3Rpb24gc3RhdGUKdHJhY2tpbmciKSBzb2x2ZWQgdGhpcyBpc3N1ZS4KCj4gVWx0aW1h
dGVseSBpZiB5b3UgY29uZmlndXJlIHRoZSBzeXN0ZW0gdG8gcGFuaWMgd2hlbiB5b3Ugc3RhcnQK
PiBkcm9wcGluZyBhdWRpdCByZWNvcmRzLCBhbmQgeW91IHN0b3AgdGhlIGF1ZGl0IGRhZW1vbiBm
b3IgYSBwZXJpb2Qgb2YKPiB0aW1lIHN1Y2ggdGhhdCB0aGUgcXVldWVzIHN0YXJ0IHRvIG92ZXJm
bG93LCB0aGUgc3lzdGVtIHdpbGwgcGFuaWMuCj4gVGhhdCdzIHdoYXQgeW91IGhhdmUgY29uZmln
dXJlZCBpdCB0byBkbyA6KQo+IAo+IEl0IGlzIGFsc28gaW1wb3J0YW50IHRvIG5vdGUgdGhhdCB0
aGUgcGFuaWMtb24tb3ZlcmZsb3cgYmVoYXZpb3IgaXMKPiBub3QgdGhlIGRlZmF1bHQsIHRoZSBz
eXNhZG1pbiBtdXN0IGV4cGxpY2l0bHkgY29uZmlndXJlIHRoZSBzeXN0ZW0gdG8KPiBiZWhhdmUg
aW4gdGhpcyB3YXkuCgpXaGF0IFBhdWwgc2FpZC4gIDotKQoKPiA+IC0tLS0tLS0tLS0gIEZvcndh
cmRlZCBNZXNzYWdlICAtLS0tLS0tLS0tCj4gPgo+ID4gU3ViamVjdDogW29zcy1zZWN1cml0eV0g
Q1ZFLTIwMjAtMTA3MDgga2VybmVsOiByYWNlIGNvbmRpdGlvbiBpbiBrZXJuZWwvCj4gPiBhdWRp
dC5jIG1heSBhbGxvdyBsb3cgcHJpdmlsZWdlIHVzZXJzIHRyaWdnZXIga2VybmVsIHBhbmljCj4g
PiBEYXRlOiBGcmlkYXksIEFwcmlsIDE3LCAyMDIwLCAxMjo0MDoxMCBBTSBFRFQKPiA+IEZyb206
IOmZiOS8n+WuuCjnlLDlkIQpIDxzcGxlbmRpZHNreS5jd2NAYWxpYmFiYS1pbmMuY29tPgo+ID4g
VG86IG9zcy1zZWN1cml0eSA8b3NzLXNlY3VyaXR5QGxpc3RzLm9wZW53YWxsLmNvbT4KPiA+Cj4g
Pgo+ID4gIkEgcmFjZSBjb25kaXRpb24gd2FzIGZvdW5kIGluIHRoZSBMaW51eCBrZXJuZWwgYXVk
aXQgc3Vic3lzdGVtLiBXaGVuIHRoZQo+ID4gc3lzdGVtIGlzIGNvbmZpZ3VyZWQgdG8gcGFuaWMg
b24gZXZlbnRzIGJlaW5nIGRyb3BwZWQsIGFuIGF0dGFja2VyIHdobyBpcyBhYmxlCj4gPiB0byB0
cmlnZ2VyIGFuIGF1ZGl0IGV2ZW50IHRoYXQgc3RhcnRzIHdoaWxlIGF1ZGl0ZCBpcyBpbiB0aGUg
cHJvY2VzcyBvZgo+ID4gc3RhcnRpbmcgbWF5IGJlIGFibGUgdG8gY2F1c2UgdGhlIHN5c3RlbSB0
byBwYW5pYyBieSBleHBsb2l0aW5nIGEgcmFjZQo+ID4gY29uZGl0aW9uIGluIGF1ZGl0IGV2ZW50
IGhhbmRsaW5nLiBUaGlzIGNyZWF0ZXMgYSBkZW5pYWwgb2Ygc2VydmljZSBieQo+ID4gY2F1c2lu
ZyBhIHBhbmljLiIKPiA+Cj4gPiBodHRwczovL2J1Z3ppbGxhLnJlZGhhdC5jb20vc2hvd19idWcu
Y2dpP2lkPTE4MjI1OTMKPiA+Cj4gPiBFbnY6Cj4gPiAgICAgUmVkIEhhdCBFbnRlcnByaXNlIExp
bnV4IFNlcnZlciByZWxlYXNlIDcuNyAoTWFpcG8pCj4gPiAgICAgMy4xMC4wLTEwNjIuMTIuMS5l
bDcueDg2XzY0Cj4gPgo+ID4gRGV0YWlsczoKPiA+IEZ1bmN0aW9uIGF1ZGl0X2xvZ19lbmQgYW5k
IGF1ZGl0X3BhbmljIG1heSBoYXZlIHJhY2UgY29uZGl0aW9ucyB3aGVuIGF1ZGl0ZAo+ID4gaXMg
cmVzdGFydGluZyBiZWNhdXNlIGF1ZGl0X3BpZCBjYW4gYmUgTlVMTCBpbiBhdWRpdF9sb2dfZW5k
IGFuZCB0aGVuIGJlY29tZQo+ID4gbm90IE5VTEwgaW4gYXVkaXRfcGFuaWMsIHdoaWNoIG1heSBh
bGxvdyBhdHRhY2tlcnMgdG8gdHJpZ2dlciBrZXJuZWwgcGFuaWMuCj4gPiBIZXJlIGlzIHBhbmlj
IGNhbGwgc3RhY2s6Cj4gPgo+ID4KPiA+IHZvaWQgYXVkaXRfbG9nX2VuZChzdHJ1Y3QgYXVkaXRf
YnVmZmVyICphYikKPiA+IHsKPiA+ICAgICBpZiAoIWFiKQo+ID4gICAgICAgICByZXR1cm47Cj4g
PiAgICAgaWYgKCFhdWRpdF9yYXRlX2NoZWNrKCkpIHsKPiA+ICAgICAgICAgYXVkaXRfbG9nX2xv
c3QoInJhdGUgbGltaXQgZXhjZWVkZWQiKTsKPiA+ICAgICB9IGVsc2Ugewo+ID4gICAgICAgICBz
dHJ1Y3Qgbmxtc2doZHIgKm5saCA9IG5sbXNnX2hkcihhYi0+c2tiKTsKPiA+ICAgICAgICAgbmxo
LT5ubG1zZ19sZW4gPSBhYi0+c2tiLT5sZW4gLSBOTE1TR19IRFJMRU47Cj4gPgo+ID4gICAgICAg
ICBpZiAoYXVkaXRfcGlkKSB7Cj4gPiAgICAgICAgICAgICBza2JfcXVldWVfdGFpbCgmYXVkaXRf
c2tiX3F1ZXVlLCBhYi0+c2tiKTsKPiA+ICAgICAgICAgICAgIHdha2VfdXBfaW50ZXJydXB0aWJs
ZSgma2F1ZGl0ZF93YWl0KTsKPiA+ICAgICAgICAgfSBlbHNlIHsKPiA+ICAgICAgICAgICAgIGF1
ZGl0X3ByaW50a19za2IoYWItPnNrYik7IC8vIDwtIGF1ZGl0X3BpZCA9PSBOVUxMIHdoZW4gYXVk
aXRkIGlzCj4gPiBraWxsZWQKPiA+ICAgICAgICAgfQo+ID4gICAgICAgICBhYi0+c2tiID0gTlVM
TDsKPiA+ICAgICB9Cj4gPiAgICAgYXVkaXRfYnVmZmVyX2ZyZWUoYWIpOwo+ID4gfQo+ID4gLT4g
YXVkaXRfcHJpbnRrX3NrYiAtPiBhdWRpdF9sb2dfbG9zdCAtPgo+ID4gdm9pZCBhdWRpdF9wYW5p
Yyhjb25zdCBjaGFyICptZXNzYWdlKQo+ID4gewo+ID4gICAgIHN3aXRjaCAoYXVkaXRfZmFpbHVy
ZSkKPiA+ICAgICB7Cj4gPiAgICAgY2FzZSBBVURJVF9GQUlMX1NJTEVOVDoKPiA+ICAgICAgICAg
YnJlYWs7Cj4gPiAgICAgY2FzZSBBVURJVF9GQUlMX1BSSU5USzoKPiA+ICAgICAgICAgaWYgKHBy
aW50a19yYXRlbGltaXQoKSkKPiA+ICAgICAgICAgICAgIHByaW50ayhLRVJOX0VSUiAiYXVkaXQ6
ICVzXG4iLCBtZXNzYWdlKTsKPiA+ICAgICAgICAgYnJlYWs7Cj4gPiAgICAgY2FzZSBBVURJVF9G
QUlMX1BBTklDOgo+ID4gICAgICAgICAvKiB0ZXN0IGF1ZGl0X3BpZCBzaW5jZSBwcmludGsgaXMg
YWx3YXlzIGxvc2V5LCB3aHkgYm90aGVyPyAqLwo+ID4gICAgICAgICBpZiAoYXVkaXRfcGlkKSAv
LyA8LSBhdWRpdF9waWQgbm90IE5VTEwgYmVjYXVzZSBhdWRpdGQgaXMgcmVzdGFydGluZwo+ID4g
ICAgICAgICAgICAgcGFuaWMoImF1ZGl0OiAlc1xuIiwgbWVzc2FnZSk7Cj4gPiAgICAgICAgIGJy
ZWFrOwo+ID4gICAgIH0KPiA+IH0KPiA+Cj4gPiBIb3cgdG8gcmVwcm9kdWNl77yaCj4gPiAxLiBz
ZXQgYXVkaXQtZmFpbHVyZSB0byBBVURJVF9GQUlMX1BBTklDKDIpIGFuZCBhZGQgYSByYW5kb20g
YXVkaXQgcnVsZSBsaWtlOgo+ID4gW3Jvb3RAdGVzdCB+XSMgY2F0IC9ldGMvYXVkaXQvcnVsZXMu
ZC9hdWRpdC5ydWxlcwo+ID4gLUQKPiA+IC1iIDgxOTIKPiA+IC1mIDIKPiA+IC13IC9ldGMvaG9z
dHMgLXAgcndhIC1rIGhvc3RzCj4gPiAyLiBrZWVwIGtpbGxpbmcgYXVkaXRkIGFuZCB0aGVuIHN0
YXJ0aW5nIGF1ZGl0ZCwgZm9yIGV4YW1wbGU6Cj4gPiB3aGlsZSB0cnVlOyBkbyBwcyBhdXggfCBn
cmVwICIvc2Jpbi9hdWRpdGQiIHwgZ3JlcCAtdiAiZ3JlcCIgfCBhd2sgJ3twcmludAo+ID4gJDJ9
JyB8IHhhcmdzIGtpbGw7IHNlcnZpY2UgYXVkaXRkIHN0YXJ0OyBzeXN0ZW1jdGwgcmVzZXQtZmFp
bGVkCj4gPiBhdWRpdGQuc2VydmljZTsgZG9uZQo+ID4gMy4gbG9nIGluIGEgbG93IHByaXZpbGVn
ZSB1c2VyIGFuZCBrZWVwIHJlYWRpbmcgL2V0Yy9ob3N0cywgZm9yIGV4YW1wbGU6Cj4gPiB3aGls
ZSB0cnVlOyBkbyBjYXQgL2V0Yy9ob3N0cyA+IC9kZXYvbnVsbDsgZG9uZQo+ID4gNC4ga2VybmVs
IHBhbmljIHdpbGwgaGFwcGVuIHdpdGhpbiBzZXZlcmFsIG1pbnV0ZXMKPiA+Cj4gPiBUaGFua3Mu
Cj4gCj4gcGF1bCBtb29yZQoKLSBSR0IKCi0tClJpY2hhcmQgR3V5IEJyaWdncyA8cmdiQHJlZGhh
dC5jb20+ClNyLiBTL1cgRW5naW5lZXIsIEtlcm5lbCBTZWN1cml0eSwgQmFzZSBPcGVyYXRpbmcg
U3lzdGVtcwpSZW1vdGUsIE90dGF3YSwgUmVkIEhhdCBDYW5hZGEKSVJDOiByZ2IsIFN1blJheWNl
cgpWb2ljZTogKzEuNjQ3Ljc3Ny4yNjM1LCBJbnRlcm5hbDogKDgxKSAzMjYzNQoKLS0KTGludXgt
YXVkaXQgbWFpbGluZyBsaXN0CkxpbnV4LWF1ZGl0QHJlZGhhdC5jb20KaHR0cHM6Ly93d3cucmVk
aGF0LmNvbS9tYWlsbWFuL2xpc3RpbmZvL2xpbnV4LWF1ZGl0

